<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Input</title>
</head>
<body>
    <h1>Enter YouTube Video URL</h1>
    <input type="text" id="videoUrl" placeholder="Enter YouTube Video URL">
    <button onclick="submitUrl()">Submit</button>

    <div id="videoContainer"></div>
    <div id="quizContainer"></div>

    <script>
        function submitUrl() {
            const videoUrl = document.getElementById('videoUrl').value;
            fetch('/api/createQuiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ videoUrl })
            }).then(response => response.json())
              .then(data => {
                  alert(`Response: ${JSON.stringify(data)}`);
                  
                  // Embed YouTube Video
                  document.getElementById('videoContainer').innerHTML = `
                      <iframe width="560" height="315" 
                      src="https://www.youtube.com/embed/${getYouTubeID(videoUrl)}" 
                      frameborder="0" allowfullscreen></iframe>
                  `;

                  // Display first question
                  displayQuestion(data.quiz[0], 0, data.quiz);
              })
              .catch(error => console.error('Error:', error));
        }

        function getYouTubeID(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function displayQuestion(questionObj, index, quiz) {
            if (!questionObj) return;
            const quizContainer = document.getElementById('quizContainer');
            quizContainer.innerHTML = `
                <h2>Question ${index + 1}: ${questionObj.question}</h2>
                <button onclick="checkAnswer('${questionObj.options[0]}', '${questionObj.answer}', ${index + 1}, quiz)">${questionObj.options[0]}</button>
                <button onclick="checkAnswer('${questionObj.options[1]}', '${questionObj.answer}', ${index + 1}, quiz)">${questionObj.options[1]}</button>
                <button onclick="checkAnswer('${questionObj.options[2]}', '${questionObj.answer}', ${index + 1}, quiz)">${questionObj.options[2]}</button>
                <button onclick="checkAnswer('${questionObj.options[3]}', '${questionObj.answer}', ${index + 1}, quiz)">${questionObj.options[3]}</button>
            `;
        }

        function checkAnswer(selected, correct, nextIndex, quiz) {
            if (selected === correct) {
                alert("✅ Correct!");
            } else {
                alert("❌ Wrong! The correct answer was: " + correct);
            }
            displayQuestion(quiz[nextIndex], nextIndex, quiz);
        }
    </script>
</body>
</html>




